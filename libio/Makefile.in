# $Id$

AR		= @AR@
RM		= @RM@
SUBDIRS         = comm mem misc net string
@SET_MAKE@

default: build
build: all
all: libio.a

libio.a:
	@for subdir in $(SUBDIRS); do \
		cd $$subdir && ${MAKE} build || exit; cd ..; \
		objs="$$subdir/*.o $$objs"; \
	done; \
	${RM} -f $@; \
	${AR} csrv $@ $$objs

depend: .depend
.depend:
	@for subdir in $(SUBDIRS); do \
		cd $$subdir && ${MAKE} depend || exit; cd ..; \
	done

clean:
	@for subdir in $(SUBDIRS); do \
		cd $$subdir && ${MAKE} clean || exit; cd ..; \
	done
	${RM} -f libio.a

distclean:
	@for subdir in $(SUBDIRS); do \
		cd $$subdir && ${MAKE} distclean || exit; cd ..; \
	done
	${RM} -f libio.a Makefile

install:
	
.PHONY: distclean build
