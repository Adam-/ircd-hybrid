# $Id: Makefile.in 33 2005-10-02 20:50:00Z knight $

CC		= @CC@
AR		= @AR@
RM		= @RM@
SED		= @SED@
SEDOBJ		= @SEDOBJ@
STDOUT		= @STDOUT@
CFLAGS		= @IRC_CFLAGS@
MKDEP		= @MKDEP@
MV		= @MV@
LD		= @LD@

IRCDLIBS        = @LIBS@ $(SSL_LIBS)

INCLUDES	= -Inet -Istring -I../include
CPPFLAGS	= ${INCLUDES} @CPPFLAGS@

IO_SRCS = \
  comm/comm.c \
  comm/fdlist.c \
  comm/fileio.c \
  comm/@SELECT_TYPE@.c \
  mem/dbuf.c \
  mem/memory.c \
  @BALLOC_C@ \
  @INET_MISC@ \
  net/irc_getaddrinfo.c \
  net/irc_getnameinfo.c \
  net/res.c \
  net/reslib.c \
  string/match.c \
  string/pcre_chartables.c \
  string/pcre_compile.c \
  string/pcre_exec.c \
  string/pcre_fullinfo.c \
  string/pcre_globals.c \
  string/pcre_study.c \
  string/pcre_tables.c \
  string/pcre_try_flipped.c \
  string/snprintf.c \
  string/sprintf_irc.c \
  string/string.c \
  @CRYPT_C@ \
  event.c \
  hook.c \
  list.c \
  log.c \
  tools.c

IO_OBJS = ${IO_SRCS:.c=.o}

default: build
build: all
all: .depend libio.a

libio.a: $(IO_OBJS)
	$(RM) -f $@
	$(AR) csrv $@ $(IO_OBJS) 

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} -c $< -o $@

.depend:
	${MKDEP} ${CPPFLAGS} ${IO_SRCS} ${STDOUT}
	@${SED} -e '/^# Autogenerated - do not delete/,$$d' <Makefile >Makefile.depend
	@echo "# Autogenerated - do not delete" >>Makefile.depend
	@echo "include .depend" >> Makefile.depend
	@${MV} Makefile.depend Makefile

clean:
	${RM} -f $(IO_OBJS) libio.a

distclean: clean
	${RM} -f Makefile .depend

install:
	
.PHONY: clean distclean install build
